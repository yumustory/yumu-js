class TextScramble{constructor(t){this.el=t,this.chars="！＜＞－＼＼／［］｛｝＝＋＊︿％＄",this.update=this.update.bind(this)}setText(t){const e=this.el.innerText,s=Math.max(e.length,t.length),r=new Promise(t=>this.resolve=t);this.queue=[];for(let r=0;r<s;r++){const s=e[r]||"",h=t[r]||"",a=Math.floor(40*Math.random()),n=a+Math.floor(40*Math.random());this.queue.push({from:s,to:h,start:a,end:n})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),r}update(){let t="",e=0;for(let s=0,r=this.queue.length;s<r;s++){let{from:r,to:h,start:a,end:n,char:o}=this.queue[s];this.frame>=n?(e++,t+=h):this.frame>=a?((!o||Math.random()<.28)&&(o=this.randomChar(),this.queue[s].char=o),t+=`<span class="randomsymbol">${o}</span>`):t+=r}this.el.innerHTML=t,e===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}const phrases=["你好","天選之人","救世主","就是你","先謝謝你","願意閱讀","你知道嗎？","寫文","喝西北風","看看左右","小額大心","你懂的"],el=document.querySelector(".randomtext"),fx=new TextScramble(el);let counter=0;const next=()=>{fx.setText(phrases[counter]).then(()=>{setTimeout(next,1e3)}),counter=(counter+1)%phrases.length};next();